## 課題 1

![image](https://raw.githubusercontent.com/yuikoito/PrAhaChallenge/master/db/reconsideration/DB1%20Diagram.drawio.png)

変更は決済テーブルからオプショナルとして設定していた決済方法を抜いただけです。
決済方法はもしかしたら今後追加になるかなと思って入れてましたが、現時点では不要なので。

以下各テーブルの説明です。

- メニュー種別...セットメニューかお好みずしか、「盛り込み」なのか「一皿 100 円寿司」なのかなどを管理するテーブル。セットメニューかお好みずしかを大カテゴリ、その他を小カテゴリとしてテーブルをわける事も考えましたが、これぐらいなら一つのテーブルで管理しても問題ないと判断し、メニュー種別テーブルのみを作りました。
- メニュー...メニューの内容を管理するテーブル。作成日と更新日があるのは、今後メニューが変更になったりする可能性を考えてです。
- 注文詳細...そのメニューが何個頼まれたか管理するテーブル。具体的な注文日や注文者情報は注文概要 ID から取得します。
- 注文概要...注文票の内容を管理するテーブル。
- カスタマー...カスタマー情報を管理するテーブル。住所は課題３にあるように今後出前とかを考えるなら必要かなと思いオプショナルで追加しました。同じく今後カスタマー情報を保持し続けるとすれば、更新することもあると思い、作成日、更新日もオプショナルとして追加しています。
- 決済...支払状況を管理するテーブル。決済日が null であれば、未決済とみなします。

## 課題 2

![image](https://raw.githubusercontent.com/yuikoito/PrAhaChallenge/master/db/reconsideration/DB2%20Diagram.drawio.png)

親メッセージと子メッセージでテーブルを分けていたのを一つにしました。
一つのテーブルで管理をするので**親メッセージ ID**と**子メッセージを持つかどうかフラグ**を追加しました。
**親メッセージ ID**だけでなく**子メッセージを持つかどうかフラグ**も追加したのは、**親メッセージ ID**だけでは、自身が子であるかどうかはわかっても、自身が親であるかどうかはわからないからです。

## 課題 3

![image](https://raw.githubusercontent.com/yuikoito/PrAhaChallenge/master/db/reconsideration/DB3%20Diagram.drawio.png)

特に変更なし

## 課題 4

![image](https://raw.githubusercontent.com/yuikoito/PrAhaChallenge/master/db/reconsideration/DB4%20Diagram.drawio.png)

特に変更なし

一つのテーブルだけで良いと考えた理由は以下。

ユーザーテーブルはスラック側の話なのでこちらで DB 設計する分には含まれないはず

メンションする相手に関しては実際のスラックボットを確認すると、string でメッセージとして送られるので、それをそのまま内容として突っ込めばいいだけ（例えば、@yui 〇〇お願いしますと送れば、`<@slack_user_id> 〇〇お願いします`みたいな形式で送られてくる。この状態で、slack の SDK を利用して text として入力すればメンションがつく）

そのため仮に複数人にメンションしたとしても、メンションする相手が配列として DB に保存されるわけではないので、メンションする相手テーブルは不要ではないか

## 課題 5

![image](https://raw.githubusercontent.com/yuikoito/PrAhaChallenge/master/db/reconsideration/DB5%20Diagram.drawio.png)

お恥ずかしながら前このタスク間に合わなかったので改めてこちらで書きます。

イミュータブルデータモデリングを意識した設計にしました。
