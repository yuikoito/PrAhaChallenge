## 回答

![image](https://user-images.githubusercontent.com/43722788/185442985-5f45f7d8-c66c-47be-85d3-3ec0b433bb51.png)


### 考えたこと
- アプリを作る場合に、先にメッセージを取得して、そのメッセージがスレッドを持っている場合は、メッセージIDでスレッドメッセージを検索してスレッドとして表示、という方が作りやすい。そのため、メッセージにスレッドを持つかどうかフラグを追加した。
- メッセージとスレッドメッセージを分けるか
  - ほとんど必要とするデータは同じなので、２つのテーブルにするか１つにまとめるかを悩んだ
  - 最終的にアプリを作る場合のことを考えて、上記の通り、全データを一度に取得してそれが親データなのか、子なのかを判断するのは計算負荷がかかると思ったので分けることを選んだ。
  - そのためスレッドメッセージを持つ場合は、親からみてすぐにわかるようにスレッドメッセージを持つかどうかフラグを追加した。
  - また、横断機能をつけるとしてもSQLなら複数のテーブルにまたがって検索はできるので問題ないと考えた。

- メッセージ及びスレッドメッセージにチャネルIDが存在している理由
  - メッセージではどのチャネルに登録されたかを知る必要があるので、必要なのは自明
  - スレッドメッセージの場合は親のメッセージIDからたどるなら不要
  - ただ、そのチャネルに所属しているユーザにしか、メッセージ・スレッドメッセージが見えないことという条件なので、検索の際にユーザーが所属しているチャネルに投稿されたメッセージ及びスレッドメッセージの中から検索を掛ける必要があるため、チャネルIDを両方でもたせることにした。
　
