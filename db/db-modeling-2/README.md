## 回答

![image](https://user-images.githubusercontent.com/43722788/185442985-5f45f7d8-c66c-47be-85d3-3ec0b433bb51.png)


### 考えたこと
- メッセージとスレッドメッセージを分けるか
  - ほとんど必要とするデータは同じなので、２つのテーブルにするか１つにまとめるかを悩んだ
  - 最終的にアプリを作る場合に、親メッセージを取得した後に、それぞれのメッセージIDでスレッドメッセージを検索してスレッドとして表示、という方が作りやすいと判断した。
  - また、全データを一度に取得してそれが親データなのか、子なのかを判断するのは計算負荷がかかるとも考えた。
  - そのためスレッドメッセージを持つ場合は、親からみてすぐにわかるようにスレッドメッセージを持つかどうかフラグを追加した。
  - また、横断機能をつけるとしてもSQLなら複数のテーブルにまたがって検索はできるので問題ないと考えた。

- メッセージ及びスレッドメッセージにチャネルIDが存在している理由
  - メッセージではどのチャネルに登録されたかを知る必要があるので、必要なのは自明
  - スレッドメッセージの場合は親のメッセージIDからたどるなら不要
  - ただ、**そのチャネルに所属しているユーザにしか、メッセージ・スレッドメッセージが見えないこと**という条件なので、実際に検索をかける場合にはチャネルIDでフィルタリングしたい。
　
